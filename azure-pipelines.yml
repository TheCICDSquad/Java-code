trigger:
- main

pool:
  name: Self_Agent

steps:
# Download Maven binary
- powershell: |
    Invoke-WebRequest -Uri https://archive.apache.org/dist/maven/maven-3/3.9.4/binaries/apache-maven-3.9.4-bin.zip -OutFile $(Build.ArtifactStagingDirectory)\maven.zip
  displayName: 'Download Maven'

# Extract Maven
- powershell: |
    Expand-Archive -Path $(Build.ArtifactStagingDirectory)\maven.zip -DestinationPath $(Build.ArtifactStagingDirectory)\maven
  displayName: 'Extract Maven'

# Run Maven using full path
- powershell: |
    & "$(Build.ArtifactStagingDirectory)\maven\apache-maven-3.9.4\bin\mvn.cmd" clean install
  displayName: 'Run Maven Build'
